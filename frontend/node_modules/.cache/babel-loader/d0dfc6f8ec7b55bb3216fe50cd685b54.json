{"ast":null,"code":"import _asyncToGenerator from\"F:\\\\Web Projects\\\\Web\\\\TSp-Line\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"F:\\\\Web Projects\\\\Web\\\\TSp-Line\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useContext}from'react';import AOS from'aos';import\"aos/dist/aos.css\";import'./index.css';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';// All pages\nimport Home from'./pages/Home.js';import Contact from'./pages/Contact.js';import Login from'./pages/Login.js';import Register from'./pages/Register.js';import ServicesAll from'./pages/ServicesAll.js';import ProductsAll from'./pages/ProductsAll.js';import AboutAll from\"./pages/AboutAll.js\";import ScrollToTop from'./components/ScrollToTop.js';import{Context}from'./index.js';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){useEffect(function(){var aos_init=function aos_init(){AOS.init({once:true,duration:1000,easing:'ease-out-cubic'});};window.addEventListener('load',function(){aos_init();});},[]);var _useContext=useContext(Context),isAuthenticated=_useContext.isAuthenticated,setIsAuthenticated=_useContext.setIsAuthenticated,setUser=_useContext.setUser;useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://tsp-line.onrender.com/api/v1/user/user/me\",{withCredentials:true});case 3:response=_context.sent;setIsAuthenticated(true);setUser(response.data.user);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setIsAuthenticated(false);setUser({});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function fetchUser(){return _ref.apply(this,arguments);};}();fetchUser();},[isAuthenticated,setIsAuthenticated,setUser]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(ScrollToTop,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/contact\",element:/*#__PURE__*/_jsx(Contact,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/servicesAll\",element:isAuthenticated?/*#__PURE__*/_jsx(ServicesAll,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/register\"})}),/*#__PURE__*/_jsx(Route,{path:\"/productsAll\",element:isAuthenticated?/*#__PURE__*/_jsx(ProductsAll,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/register\"})}),/*#__PURE__*/_jsx(Route,{path:\"/aboutAll\",element:/*#__PURE__*/_jsx(AboutAll,{})})]})})})});}export default App;","map":{"version":3,"sources":["F:/Web Projects/Web/TSp-Line/frontend/src/App.js"],"names":["React","useEffect","useContext","AOS","BrowserRouter","Router","Routes","Route","Navigate","Home","Contact","Login","Register","ServicesAll","ProductsAll","AboutAll","ScrollToTop","Context","axios","App","aos_init","init","once","duration","easing","window","addEventListener","isAuthenticated","setIsAuthenticated","setUser","fetchUser","get","withCredentials","response","data","user"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from 'react';\nimport AOS from 'aos';\nimport \"aos/dist/aos.css\";\nimport './index.css';\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Navigate\n} from 'react-router-dom';\n// All pages\nimport Home from './pages/Home.js';\nimport Contact from './pages/Contact.js';\nimport Login from './pages/Login.js';\nimport Register from './pages/Register.js';\nimport ServicesAll from './pages/ServicesAll.js';\nimport ProductsAll from './pages/ProductsAll.js';\nimport AboutAll from \"./pages/AboutAll.js\"\n\nimport ScrollToTop from './components/ScrollToTop.js';\nimport { Context } from './index.js';\nimport axios from 'axios';\n\n\nfunction App() {\n  useEffect(() => {\n    const aos_init = () => {\n      AOS.init({\n        once: true,\n        duration: 1000,\n        easing: 'ease-out-cubic',\n      });\n    }\n\n    window.addEventListener('load', () => {\n      aos_init();\n    });\n  }, []);\n\n\n  const { isAuthenticated, setIsAuthenticated, setUser } = useContext(Context);\n\nuseEffect(() => {\n  const fetchUser = async () => {\n    try {\n      const response = await axios.get(\n        \"https://tsp-line.onrender.com/api/v1/user/user/me\",\n        {\n          withCredentials: true,\n        }\n      );\n      setIsAuthenticated(true);\n      setUser(response.data.user);\n    } catch (error) {\n      setIsAuthenticated(false);\n      setUser({});\n    }\n  };\n  fetchUser();\n}, [isAuthenticated, setIsAuthenticated, setUser]);\n\n  return (\n    <>\n      <Router>\n        <ScrollToTop>\n          <Routes>\n            <Route path=\"/\" element={<Home />} />\n            <Route path=\"/contact\" element={<Contact />} />\n            <Route path=\"/login\" element={<Login />} /> \n            <Route path=\"/register\" element={<Register />} /> \n            <Route path=\"/servicesAll\" element={ isAuthenticated ? <ServicesAll /> : <Navigate to=\"/register\" />} /> \n            <Route path=\"/productsAll\" element={ isAuthenticated ? <ProductsAll /> : <Navigate to=\"/register\" />} /> \n            <Route path=\"/aboutAll\" element={<AboutAll />} />\n          </Routes>\n        </ScrollToTop>\n      </Router>\n    </>\n  );\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}